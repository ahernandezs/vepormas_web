<div ng-include="'views/partials/layout/main-header.html'"></div>

<div class="account-header">
  <div class="container">
    <div class="row">
      <div class="col-md-2">
        <h4>{{ currentAccount.balance.current | currency }}</h4>
        <p>Total disponible</p>
      </div>
      <div class="col-md-6">
        <div href="" ng-class="currentAccount.account_type | lowercase" class="small"></div>
        <h4 class="account-name">{{currentAccount.name}} <span class="last-digits">{{currentAccount.last_digits}}</span></h4>
      </div>
      <div class="col-md-4">
        <button type="button" class="btn btn-info btn-alert pull-right">
          <span class="glyphicon glyphicon-phone"></span>
          alertas
        </button>
      </div>
    </div>
  </div>
</div>

<div class="account-menu">
  <div class="container">
    <div class="row">
      <div class="col-md-7 col-lg-8">
        <div class="row">
          <div class="col-md-6">
            <div class=left-inner-addon>
              <i class="glyphicon glyphicon-search"></i>
              <input class="form-control input-sm" type="search" placeholder="Buscar en movimientos" ng-model="keyword" maxlength="20"/>
            </div>
          </div>

          <div class="col-md-6">
            <div class="account-menu-buttons pull-right">
              <h5>Ordenar por:</h5>
              <div class="btn-group btn-group-sm">
                <button type="button" class="btn btn-default" ng-click="changeSorting('created_at')">Fecha <span ng-class="selectSortingClass('created_at')" class="glyphicon"/></button>
                <button type="button" class="btn btn-default" ng-click="changeSorting('amount')">Monto <span ng-class="selectSortingClass('amount')" class="glyphicon"/></button>
              </div>
            </div>
          </div>
        </div>
      </div>

      <div class="col-md-5 col-lg-4 pull-right">
        <div class="account-menu-buttons">
          <h5>Pagar:</h5>
          <div class="btn-group btn-group-sm">
            <button ng-click="showServices()" type="button" class="btn btn-default"><span class="glyphicon glyphicon-briefcase"></span> Servicios</button>
            <button ng-click="showCards()" type="button" class="btn btn-default"><span class="glyphicon glyphicon-credit-card"></span> Tarjetas</button>
          </div>

          <button ng-click="showTransfers()" type="button" class="btn btn-default btn-sm"><span class="glyphicon glyphicon-transfer"></span> Traspasos</button>
        </div>
      </div>
    </div>
  </div>
</div>

<div class="transactions">
   <div class="container">
    <div class="row">
      <div class="col-md-7 col-lg-8 pull-left">
        <div infinite-scroll="nextPage()" infinite-scroll-disabled="busy" infinite-scroll-distance="1">
          <div ng-repeat="transaction in transactions | orderBy:sorting.column:sorting.descending | filter:keyword">
            <div class="row transaction" ng-class="{selected: transaction._transaction_id === currentTransaction._transaction_id}"
              ng-class-odd="'transaction-odd'" ng-click="showTransactionDetail(transaction)" id="txn-{{transaction._transaction_id}}">
              <div class="col-md-2">
                <p>{{transaction.created_at | date:'MMM'}}</p>
                <h5>{{transaction.created_at | date:'dd'}}</h5>
              </div>
              <div class="col-md-5">
                <span class="description">{{transaction.description}}</span>
              </div>
              <div class="col-md-3">
                <span class="category">{{transaction.type}}</span>
              </div>
              <div class="col-md-2">
                <span class="pull-right amount">
                  {{transaction.amount | currency}}
                </span>
              </div>
            </div>
          </div>
          <div ng-show="clientOrServerBusy()">Cargando transaciones...</div>
          <div ng-show="error()">Hubo un problema al cargar sus transacciones, intente m&aacute;s tarde</div>
        </div>
      </div>
      <div class="col-md-5 col-lg-4 pull-right" ng-switch on="selection">

        <div ng-switch-when="transaction">
          <div ng-include="'views/partials/transaction-detail.html'"></div>
        </div>
        <div ng-switch-when="services">
          <div ng-include="'views/partials/services/services.html'"></div>
        </div>
        <div ng-switch-when="servicespayment">
          <div ng-include="'views/partials/services/services-payment.html'"></div>
        </div>
        <div ng-switch-when="servicespaymenttoken">
          <div ng-include="'views/partials/services/services-token.html'"></div>
        </div>
        <div ng-switch-when="applyservicespayment">
          <div ng-include="'views/partials/services/service-applied.html'"></div>
        </div>
        <div ng-switch-when="cards">
          <div ng-include="'views/partials/cards/cards.html'"></div>
        </div>
        <div ng-switch-when="cardspayment">
          <div ng-include="'views/partials/cards/cards-payment.html'"></div>
        </div>
        <div ng-switch-when="cardspaymenttoken">
          <div ng-include="'views/partials/cards/cards-token.html'"></div>
        </div>
        <div ng-switch-when="applycardpayment">
          <div ng-include="'views/partials/cards/card-applied.html'"></div>
        </div>
        <div ng-switch-when="transfers">
          <div ng-include="'views/partials/transfers/transfers.html'"></div>
        </div>
        <div ng-switch-when="transferspayment">
          <div ng-include="'views/partials/transfers/transfers-payment.html'"></div>
        </div>
        <div ng-switch-when="transferspaymenttoken">
          <div ng-include="'views/partials/transfers/transfers-token.html'"></div>
        </div>
        <div ng-switch-when="applytransferpayment">
          <div ng-include="'views/partials/transfers/transfer-applied.html'"></div>
        </div>
        <div ng-switch-when="addbeneficiary">
          <div ng-include="'views/partials/transfers/add-beneficiary.html'"></div>
        </div>
        <div ng-switch-when="addbeneficiaryconfirm">
          <div ng-include="'views/partials/transfers/add-beneficiary-confirm.html'"></div>
        </div>
        <div ng-switch-when="addcard">
          <div ng-include="'views/partials/cards/add-card.html'"></div>
        </div>
        <div ng-switch-when="addcardconfirm">
          <div ng-include="'views/partials/cards/add-card-confirm.html'"></div>
        </div>

        <div ng-switch-default>
          <div ng-include="'views/partials/account-detail.html'"></div>
        </div>
      </div>
    </div>
  </div>
</div>

<div ng-include="'views/partials/layout/main-footer.html'"></div>
